<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>אהבת עולם</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="/public/css/style.css" />
  <style>
/* ===== בסיס ===== */
:root{
  --indigo:#4f46e5; --indigo-600:#4338ca; --indigo-700:#3730a3;
  --ink:#111827; --muted:#6b7280; --panel:#ffffff;
  --sky-50:#f6fbff; --sky-100:#eaf5ff; --sky-200:#e0f2fe; --line:#e5e7eb;
}
*{box-sizing:border-box}
body{background:var(--sky-50);font-family:Arial,system-ui,Segoe UI,Helvetica Neue,sans-serif;color:var(--ink)}
.container{max-width:1600px;margin:0 auto;padding:12px}

/* ===== כותרת עליונה + מותג ===== */
.page-hero{
  position:relative;
  background:linear-gradient(180deg,#e6ecff 0%, #f4f7ff 100%);
  border:1px solid #dfe4ff; border-radius:14px;
  padding:12px 14px; margin:6px 0 10px; text-align:center;
}
.page-hero h1{ margin:0; font-size:1.15rem; font-weight:800; color:#1f2937; letter-spacing:.2px; }
.brand-badge{
  position:absolute; inset-inline-start:10px; inset-block-start:10px;   /* RTL-aware */
  background:#fff; border:1px solid #dbe3ff; border-radius:999px;
  padding:4px 10px; font-size:.8rem; font-weight:800; color:#3730a3;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
}

/* ===== חתימות ===== */
.bsd{ text-align:right; font-weight:700; font-size:.95rem; color:#0f172a; margin-bottom:6px; }
.signature{
  display:inline-block; font-size:.78rem; color:#374151; background:#fff;
  border:1px dashed #d1d5db; border-radius:8px; padding:4px 8px; margin-top:8px;
  width:fit-content; line-height:1.35;
}
.signature a{ color:#111827; text-decoration:none; }
.signature a:hover{ text-decoration:underline; }

/* ===== אזור סינונים – גרסה קומפקטית ===== */
.filters{
  display:grid; grid-template-columns:repeat(12,minmax(0,1fr));
  gap:8px; align-items:end; margin-top:6px;
  background:var(--sky-200); border:1px solid #bae6fd; border-radius:12px; padding:10px;
}
.filter-row{display:flex;flex-direction:column;gap:3px;grid-column:span 3;}
.filter-row label{font-size:.85rem; color:#374151; font-weight:600;}
.filter-row input,.filter-row select{
  height:32px; padding:.3rem .55rem;
  border:1px solid var(--line); border-radius:10px; background:#fff; outline:none;
  transition:box-shadow .15s ease,border-color .15s ease; font-size:.9rem;
}
.filter-row input::placeholder{color:#9ca3af;}
.filter-row input:focus,.filter-row select:focus{border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(79,70,229,.12)}

/* רב־בחירה – צר יותר, תכולה צפופה */
.multi{
  grid-column:span 4; border:1px solid var(--line);
  border-radius:10px; padding:10px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04)
}
.multi h3{margin:0 0 6px;font-size:.9rem;font-weight:800;color:#0f172a}
.multi .controls{display:flex;gap:6px;margin-bottom:6px}
.multi .controls button{
  padding:.28rem .55rem; border-radius:8px; border:1px solid #cfd4dc; background:#fff; color:#111827; font-weight:600; cursor:pointer; font-size:.8rem;
}
.multi .controls button:hover{background:#f3f4f6}
.multi .grid{display:grid;gap:6px;grid-template-columns:repeat(3,minmax(0,1fr))}
.multi label{
  display:flex;align-items:center;gap:8px;background:#fff;border:1px solid var(--line);border-radius:9px;padding:.35rem .5rem; font-size:.88rem;
}
.multi input[type="checkbox"]{width:16px;height:16px;accent-color:var(--indigo)}

/* כפתורי פעולה – לימין ב־RTL */
.actions{
  grid-column:1/-1; display:flex; justify-content:flex-start;   /* ← זה מה שמעביר לימין ב-RTL */
  gap:8px; margin-top:6px;
}
.actions button{
  height:34px; padding:0 12px; border-radius:10px; font-weight:700; cursor:pointer; transition:filter .15s ease,transform .05s ease; font-size:.9rem;
}
#applyBtn{background:var(--indigo-600); color:#fff; border:1px solid var(--indigo-600)}
#applyBtn:hover{filter:brightness(.96)}
#resetBtn{background:#fff; color:#374151; border:1px solid #cfd4dc}
#resetBtn:hover{background:#f9fafb}

/* ===== סרגל חיפוש – קומפקטי ===== */
.search{
  margin:10px 0 12px; display:grid; grid-template-columns:150px 1fr 110px;
  gap:8px; align-items:center; background:#fff; border:1px solid var(--line);
  border-radius:10px; padding:8px 10px; box-shadow:0 1px 2px rgba(0,0,0,.04);
}
.search .hint{color:#4b5563; font-weight:600; font-size:.9rem}
.search input{height:34px;border:1px solid var(--line);border-radius:10px;padding:0 12px;outline:none;background:#fff;font-size:.9rem}
.search input::placeholder{color:#9ca3af}
.search input:focus{border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(79,70,229,.12)}
.search button{height:34px;border-radius:10px;border:1px solid var(--indigo-600);background:var(--indigo-600);color:#fff;font-weight:800;cursor:pointer;font-size:.9rem}
.search button:hover{filter:brightness(.98)}
.search button:active{transform:translateY(1px)}

/* אזהרת Gatekeeper */
.warn{color:var(--indigo-700); background:#eef2ff; border:1px solid #c7d2fe; border-radius:10px; padding:8px 10px; max-width:28ch; line-height:1.45; font-weight:700; font-size:.9rem}

/* ===== כרטיסים ===== */
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(420px,1fr));gap:18px;align-items:stretch}
.card{border:1px solid var(--line);border-radius:14px;padding:14px 16px;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.04);transition:box-shadow .15s ease,transform .15s ease}
.card:hover{box-shadow:0 6px 16px rgba(0,0,0,.06)}
.card-header{display:flex;flex-wrap:wrap;gap:6px 8px;align-items:baseline;margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid #f1f5f9}
.badge{background:#eef2ff;border:1px solid #c7d2fe;padding:0 .5rem;border-radius:999px;font-weight:700}
.muted{color:var(--muted)}
.resume-toolbar{display:flex;gap:.4rem;justify-content:flex-start;margin-bottom:.3rem}
.resume-panel[hidden]{display:none}
.resume-panel{border:1px solid var(--line);border-radius:10px;padding:10px;background:#fff}
.resume-actions{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-top:8px}
.warn-small{color:var(--indigo-700);font-size:.9rem}
.btn{height:34px;padding:0 12px;border-radius:10px;border:1px solid transparent;background:#f8fafc;cursor:pointer;font-weight:700;font-size:.9rem}
.btn-ghost{background:#fff;border:1px solid var(--line);color:#111827}
.btn-ghost:hover{background:#f9fafb}
.btn-primary{background:var(--indigo-600);border-color:var(--indigo-600);color:#fff}
.btn-primary:hover{filter:brightness(.96)}
#stats{margin:6px 2px 10px;color:#374151;font-weight:700;text-align:right}

/* בס"ד אזור-על */
.page-meta{margin-bottom:10px;text-align:right}
.page-title{background:#eef2ff;color:#1e1b4b;padding:8px 14px;border-radius:10px;font-size:1.25rem;text-align:center;margin-bottom:16px}

/* רספונסיביות */
@media (max-width:1200px){
  .filters{grid-template-columns:repeat(8,minmax(0,1fr)); gap:10px}
  .filter-row{grid-column:span 4}
  .multi{grid-column:span 8}
  .multi .grid{grid-template-columns:repeat(2,minmax(0,1fr))}
}
@media (max-width:800px){
  .filters{grid-template-columns:repeat(6,minmax(0,1fr))}
  .filter-row{grid-column:span 6}
  .multi{grid-column:span 6}
  .multi .grid{grid-template-columns:1fr}
}
@media (max-width:700px){
  .search{grid-template-columns:1fr}
  .search .hint{display:none}
  .search button{width:100%}
}

/* הסתרת פאנלי כיסוי */
[data-multi-section="cover-actual"][hidden],
[data-multi-section="cover-expected"][hidden]{display:none}

    </style>

</head>
<body>
  <main class="container">
    <div class="page-meta">
      <div class="bsd">בס"ד</div>
    </div>  
    <header class="page-hero">
      <div class="brand-badge">אהבת-עולם</div>
      <h1>מאגר השידוכים של אהבת עולם</h1>
    </header>
    

    <section class="filters">
      <div class="filter-row">
        <label for="groupSelect">מס' קבוצה בארגון</label>
        <select id="groupSelect">
          <option value="">— בחרי —</option>
        </select>
      </div>

      <div class="filter-row">
        <label for="ethnicitySelect">עדה</label>
        <select id="ethnicitySelect">
          <option value="">— בחרי —</option>
          <option value="אשכנז">אשכנז</option>
          <option value="ספרד">ספרד</option>
          <option value="חסידי">חסידי</option>
          <!-- הוסר: <option value="תימן">תימן</option> -->
        </select>
      </div>

      <div class="filter-row">
        <label for="genderSelect">מגדר</label>
        <select id="genderSelect">
          <option value="">— בחרי —</option>
          <option value="זכר">זכר</option>
          <option value="נקבה">נקבה</option>
        </select>
      </div>

      <div class="filter-row">
        <label for="statusSelect">מצב אישי</label>
        <select id="statusSelect">
          <option value="">— הכל —</option>
          <option value="רווק/ה">רווק/ה</option>
          <option value="גרוש/ה">גרוש/ה</option>
          <option value="אלמנ/ה">אלמנ/ה</option>
        </select>
      </div>

      <div class="filter-row">
        <label for="ageMin">גיל מינ׳</label>
        <input id="ageMin" type="number" inputmode="numeric" placeholder="למשל 20" />
      </div>
      <div class="filter-row">
        <label for="ageMax">גיל מקס׳</label>
        <input id="ageMax" type="number" inputmode="numeric" placeholder="למשל 28" />
      </div>

      <div class="filter-row">
        <label for="heightMin">גובה מינ׳ (מטר)</label>
        <input id="heightMin" type="number" step="0.01" inputmode="decimal" placeholder="למשל 1.60 או 160" />
      </div>
      <div class="filter-row">
        <label for="heightMax">גובה מקס׳ (מטר)</label>
        <input id="heightMax" type="number" step="0.01" inputmode="decimal" placeholder="למשל 1.85 או 185" />
      </div>

      <section class="multi" data-multi-section="cover-actual" hidden>
        <h3>כיסוי/זקן בפועל</h3>
        <div class="controls">
          <button type="button" class="secondary" data-select-all="actualCover">בחר הכל</button>
          <button type="button" class="secondary" data-clear-all="actualCover">נקה</button>
        </div>
        <div class="grid">
          <!-- זכר בפועל → זקן -->
          <label data-role="beard"><input type="checkbox" data-multi="actualCover" value="זקן מלא דוקא" /> זקן מלא דוקא</label>
          <label data-role="beard"><input type="checkbox" data-multi="actualCover" value="עדיף זקן מלא" /> עדיף זקן מלא</label>
          <label data-role="beard"><input type="checkbox" data-multi="actualCover" value="מגולח או זקן קטן מסודר" /> מגולח או זקן קטן מסודר</label>
          <!-- נקבה בפועל → כיסוי ראש -->
          <label data-role="cover"><input type="checkbox" data-multi="actualCover" value="דוקא פאה" /> דוקא פאה</label>
          <label data-role="cover"><input type="checkbox" data-multi="actualCover" value="דוקא מטפחת" /> דוקא מטפחת</label>
          <label data-role="cover"><input type="checkbox" data-multi="actualCover" value="עדיף פאה" /> עדיף פאה</label>
          <label data-role="cover"><input type="checkbox" data-multi="actualCover" value="עדיף מטפחת" /> עדיף מטפחת</label>
          <label data-role="cover"><input type="checkbox" data-multi="actualCover" value="גמיש מטפחת או פאה" /> גמיש מטפחת או פאה</label>
        </div>
      </section>

      <section class="multi" data-multi-section="cover-expected" hidden>
        <h3>ציפיות (כיסוי/זקן)</h3>
        <div class="controls">
          <button type="button" class="secondary" data-select-all="expectedCover">בחר הכל</button>
          <button type="button" class="secondary" data-clear-all="expectedCover">נקה</button>
        </div>
        <div class="grid">
          <!-- זכר → מצפה כיסוי; נקבה → מצפה זקן -->
          <!-- כיסוי -->
          <label data-role="cover"><input type="checkbox" data-multi="expectedCover" value="דוקא פאה" /> דוקא פאה</label>
          <label data-role="cover"><input type="checkbox" data-multi="expectedCover" value="דוקא מטפחת" /> דוקא מטפחת</label>
          <label data-role="cover"><input type="checkbox" data-multi="expectedCover" value="עדיף פאה" /> עדיף פאה</label>
          <label data-role="cover"><input type="checkbox" data-multi="expectedCover" value="עדיף מטפחת" /> עדיף מטפחת</label>
          <label data-role="cover"><input type="checkbox" data-multi="expectedCover" value="גמיש מטפחת או פאה" /> גמיש מטפחת או פאה</label>
          <!-- זקן -->
          <label data-role="beard"><input type="checkbox" data-multi="expectedCover" value="זקן מלא דוקא" /> זקן מלא דוקא</label>
          <label data-role="beard"><input type="checkbox" data-multi="expectedCover" value="עדיף זקן מלא" /> עדיף זקן מלא</label>
          <label data-role="beard"><input type="checkbox" data-multi="expectedCover" value="מגולח או זקן קטן מסודר" /> מגולח או זקן קטן מסודר</label>
        </div>
      </section>

      <section class="multi" data-multi-section="kosher-phone">
        <h3>כשרות טלפון</h3>
        <div class="controls">
          <button type="button" class="secondary" data-select-all="kosherPhone">בחר הכל</button>
          <button type="button" class="secondary" data-clear-all="kosherPhone">נקה</button>
        </div>
        <div class="grid">
          <label><input type="checkbox" data-multi="kosherPhone" value="כשר" /> כשר</label>
          <label><input type="checkbox" data-multi="kosherPhone" value="מסונן" /> מסונן</label>
          <label><input type="checkbox" data-multi="kosherPhone" value="לא כשר" /> לא כשר</label>
          <label><input type="checkbox" data-multi="kosherPhone" value="כשר ויש גם טל' נוסף מסונן לצורך עבודה או לימודים" /> כשר ויש גם טל' נוסף מסונן לצורך עבודה או לימודים</label>
        </div>
      </section>

      <section class="multi" data-multi-section="torah">
        <h3>רצון ללמוד תורה</h3>
        <div class="controls">
          <button type="button" class="secondary" data-select-all="torah">בחר הכל</button>
          <button type="button" class="secondary" data-clear-all="torah">נקה</button>
        </div>
        <div class="grid">
          <label><input type="checkbox" data-multi="torah" value="דוקא כל היום" /> דוקא כל היום</label>
          <label><input type="checkbox" data-multi="torah" value="עדיף כל היום" /> עדיף כל היום</label>
          <label><input type="checkbox" data-multi="torah" value="אפשר לומד ועובד חלקית" /> אפשר לומד ועובד חלקית</label>
          <label><input type="checkbox" data-multi="torah" value="עדיף כל היום או משרה תורנית חלקית" /> עדיף כל היום או משרה תורנית חלקית</label>
        </div>
      </section>
      <div class="signature">
        פותח ע"י יעל | 
        <a href="mailto:yaelintech@gmail.com">yaelintech@gmail.com</a>
      </div>
      <div class="actions">
        <button id="applyBtn">החל סינון</button>
        <button id="resetBtn" class="secondary">נקה הכל</button>
      </div>

      <p id="gateMsg" class="warn"></p>
    </section>

    <section class="search" hidden>
      <span class="hint">חיפוש בתוך הכרטיסים המסוננים</span>
      <input id="searchFilteredInput" placeholder="טקסט חופשי..." />
      <button id="searchFilteredBtn">חיפוש</button>
    </section>
    

    <section class="results">
      <div id="stats"></div>
      <div id="cards" class="cards"></div>
    </section>
  </main>

  <script>
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-select-all],[data-clear-all]');
      if (!btn) return;
      const key = btn.getAttribute('data-select-all') || btn.getAttribute('data-clear-all');
      const check = !!btn.getAttribute('data-select-all');
      document.querySelectorAll(`input[type="checkbox"][data-multi="${key}"]`).forEach(cb => cb.checked = check);
    });
  </script>

  <script type="module" src="/public/js/filters.js"></script>
  <script type="module" src="/public/js/candidates.js"></script>
</body>
</html>
